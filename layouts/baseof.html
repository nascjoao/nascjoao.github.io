<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">

<head>
    {{ partial "head.html" . }}
</head>

<body>
    <main>
        {{ block "main" . }}
        This will be replaced with content from the
        corresponding "define" action found in the template
        to which this base template is applied.
        {{ end }}
    </main>

    {{ $defines := dict
    "global.lang" (site.Language.LanguageCode | jsonify)
    }}
    {{ with resources.Get "main.js" }}
    {{$opts := dict
    "minify" (not hugo.IsDevelopment)
    "sourceMap" (cond hugo.IsDevelopment "external" "")
    "targetPath" (cond hugo.IsDevelopment "js/main.js" "js/main.min.js")
    "defines" $defines
    }}
    {{ with . | js.Build $opts }}
    {{ if hugo.IsDevelopment }}
    <script src="{{ .RelPermalink }}"></script>
    {{ else }}
    {{ with . | fingerprint }}
    <script src="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous"></script>
    {{ end }}
    {{ end }}
    {{ end }}
    {{ end }}
</body>

</html>